# vim:filetype=zsh foldmethod=marker autoindent expandtab shiftwidth=2

umask 002
limit coredumpsize 0

OS="";
case "$OSTYPE" in
  solaris*) OS="SOLARIS" ;;
  darwin*)  OS="OSX" ;;
  linux*)   OS="LINUX" ;;
  bsd*)     OS="BSD" ;;
  msys*)    OS="WINDOWS" ;;
  *)        OS="UNKNOWN" ;;
esac
export OS

[[ $OS = "LINUX" ]] && eval `dircolors`

export GREP_OPTIONS='--color=auto'

if [ -x $(command -v nvim) ]; then
  EDITOR=nvim
elif [ -x $(command -v vim) ]; then
  EDITOR=vim
else
  EDITOR=vi
fi

export EDITOR
export ECTO_EDITOR=$EDITOR
export CVSEDITOR=$EDITOR
export VISUAL=$EDITOR

if [[ -x /usr/bin/lesspipe.sh ]] ; then
  export LESSOPEN="|lesspipe.sh %s"
elif [[ -x /usr/bin/lesspipe ]] ; then
  export LESSOPEN="|lesspipe %s"
fi

# if [[ -x '/usr/bin/most' ]] then
#   export PAGER='/usr/bin/most -c'
#   export MOST_SWITCHES=" -s"
#   export MOST_EDITO="$EDITOR +%d %s"
# el
if [[ -x $(command -v less) ]] then
  export PAGER="$(command -v less) -F -i -S -w -X -R"
elif [[ -x $(command -v more) ]] then
  export PAGER='/usr/bin/more'
fi

export MANPAGER="$PAGER"


export RSYNC_RSH=ssh

[[ -z $HOSTNAME ]] && export HOSTNAME=`hostname`
# use brew ctags
[[ $OS = "OSX" ]] && export PATH="$PATH:/usr/local/bin"

# yarn path
export PATH="$HOME/.yarn/bin:$PATH"
test -d "${KREW_ROOT:-$HOME/.krew}" && export PATH="${KREW_ROOT:-$HOME/.krew}/bin:$PATH"

# export PATH="$GEM_HOME/bin:$PATH"

# enable quick scripts
test -d ~/bin && export PATH="$HOME/bin:${PATH}"

# overcommit
command -v overcommit && export GIT_TEMPLATE_DIR="$(overcommit --template-dir)"

# terraform
TERRAFORM_CACHE_DIR="$HOME/.terraform.d/plugins-cache"
[[ ! -d "$TERRAFORM_CACHE_DIR" ]] && mkdir -p "$TERRAFORM_CACHE_DIR"

# terragrunt
if [ -x "$(command -v terragrunt)" ]; then
  export TERRAGRUNT_DOWNLOAD=~/.terragrunt-cache
  [[ ! -d "$TERRAGRUNT_DOWNLOAD" ]] && mkdir -p "$TERRAGRUNT_DOWNLOAD"
fi
